#!/usr/bin/env ruby

require 'traveller_rpg'
require 'traveller_rpg/careers'
require 'traveller_rpg/generator'
require 'traveller_rpg/career_path'

char = TravellerRPG::Generator.character
path = TravellerRPG::CareerPath.new(char)
careers = %w{Scout Agent}

puts
puts char.report(desc: :long, stuff: false, credits: false)
puts

loop {
  careers = path.eligible(careers)
  break if careers.empty?

  career = TravellerRPG.choose("Choose a career:", *careers)
  career = TravellerRPG.career_class(career).new(char)
  path.run(career)

  puts "\n"
  path.careers.each { |c| puts c.report, "\n" }
  puts "\n"
  puts char.report
  puts "\n" * 2

  break if TravellerRPG.choose("Exit career mode?", :yes, :no) == :yes
}

puts "DONE"
